!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],t):e.Dialog=t(e.jQuery)}(this,function(e){"use strict";function t(e,t){var n=window.getComputedStyle,o=n?n(e,null):e.currentStyle;return{getPropertyValue:function(e){if(o)return o.getPropertyValue?o.getPropertyValue(e):(e="float"===e?"styleFloat":e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),o[e])}}}function n(e){for(var t in e)if(e.hasOwnProperty(t)&&void 0!==y[t])return t}function o(e){return 1e3*Number(e.slice(0,-1))}function r(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,v(t,function(t,n){return o(t)+o(e[n])}))}function i(e){return e?e.split(", "):[]}function a(e){var n,o,a,l=t(e),s=i(l.getPropertyValue(x+"-delay")),u=i(l.getPropertyValue(x+"-duration")),c=r(s,u),d=i(l.getPropertyValue(b+"-delay")),f=i(l.getPropertyValue(b+"-duration")),_=r(d,f);return a=Math.max(c,_),n=a>0?c>_?x:b:null,o=n?n===x?u.length:f.length:0,{type:n,count:o,timeout:a}}function l(e,t){if(!b&&!x)return t();var n=e[0],o=a(n),r=o.type;if(!r)return t();var i=0,l=o.count,s=o.timeout,u=r===x?E[x]:w[b],c=function(){e.off(u,d),t()},d=function(e){e.target===n&&++i>=l&&c()};setTimeout(function(){i<l&&c()},s+1),e.on(u,d)}function s(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1")}e="default"in e?e["default"]:e;var u=Array.prototype,c=u.filter,d=u.indexOf,f=u.forEach,_=u.map,h=c?function(e,t,n){return c.call(e,t,n)}:function(e,t,n){for(var o,r=[],i=e.length>>>0,n=arguments.length>=3?arguments[2]:e,a=0;a<i;a++)a in e&&(o=e[a],t.call(n,o,a,e)&&r.push(o));return r},m=d?function(e,t,n){return d.call(e,t,n)}:function(e,t,n){var o=e.length>>>0;for(n=Number(n)||0,n=Math[n<0?"ceil":"floor"](n),n<0&&(n=Math.max(n+o,0));n<o;n++)if(n in e&&e[n]===t)return n;return-1},p=f?function(e,t,n){f.call(e,t,n)}:function(e,t,n){arguments.length<3&&(n=e);for(var o=0,r=e.length;o<r;o++)t.call(e,e[o],o,e)},v=_?function(e,t,n){return _.call(e,t,n)}:function(e,t,n){var o=this.length>>>0,r=new Array(o);arguments.length<3&&(n=e);for(var i=0;i<o;i++)i in e&&(r[i]=fn.call(n,e[i],i,e));return r},g={alloc:[],node:e('<div class="ui-modal-dialog-mask" tableindex="0"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:"auto",overflow:"hidden",userSelect:"none"}),backdrop:e('<div tableindex="0"></div>').css({position:"fixed",top:0,left:0,width:0,height:0,opacity:0}),show:function(e){m(g.alloc,e)===-1&&(g.alloc.push(e),e=e.node,g.node.css("z-index","auto").insertBefore(e),g.backdrop.insertAfter(e))},hide:function(e){g.alloc=h(g.alloc,function(t){return e!==t});var t=g.alloc.length;0===t?(g.node.remove(),g.backdrop.remove()):(e=g.alloc[t-1].node,g.node.insertBefore(e),g.backdrop.insertAfter(e))}},y=document.documentElement.style,w={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",KhtmlAnimation:"khtmlAnimationEnd"},E={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",KhtmlTransition:"khtmlTransitionEnd"},b=n(w),x=n(E),T=/\s+/,A=e(window),M=e(document);return s.zIndex=1024,s.current=null,s.mask=g.node[0],s.prototype={node:null,follow:null,fixed:!1,destroyed:!0,open:!1,returnValue:void 0,autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",constructor:s,__show:function(e){var t=this;if(t.destroyed)return t;var n=t.__node;return t.open=!0,t.__activeElement=t.__getActive(),t.follow=arguments.length?e:t.follow,t.__ready||(n.addClass(t.className).css("position",t.fixed?"fixed":"absolute"),n.appendTo(document.body),t.__ready=!0),t.__innerHTML!==t.innerHTML&&(n.html(t.innerHTML),t.__innerHTML=t.innerHTML),t.modal&&(g.show(t),n.addClass(t.className+"-modal")),n.attr("role",t.modal?"alertdialog":"dialog").removeClass(t.className+"-close").addClass(t.className+"-show").show(),t.reset().focus(),t.__dispatchEvent("show"),t},show:function(e){var t=this;if(t.modal){var n=t.__node;t.open&&g.hide(t),n.removeClass(t.className+"-modal")}return t.modal=!1,t.__show(e)},showModal:function(e){var t=this;t.__node;return t.modal=!0,t.__show(e)},close:function(e){var t=this;if(t.destroyed||!t.open)return t;if(t.__dispatchEvent("beforeclose")===!1)return t;void 0!==e&&(t.returnValue=e);var n=(t.node,t.__node);return n.removeClass(t.className+"-show").addClass(t.className+"-close"),l(n,function(){n.hide(),t.modal&&g.hide(t),t.blur(),t.open=!1,t.__dispatchEvent("close")}),t},remove:function(){var e=this;if(e.destroyed)return e;if(e.__dispatchEvent("beforeremove")===!1)return e;s.current===e&&(s.current=null),e.open&&e.modal&&g.hide(e),e.__node.remove(),e.destroyed=!0,e.__dispatchEvent("remove");for(var t in e)delete e[t];return e},reset:function(){var e=this;if(e.destroyed||!e.open)return e;var t=e.follow;return t?e.__follow(t):e.__center(),e.__dispatchEvent("reset"),e},focus:function(){var t=this;if(t.destroyed||!t.open)return t;var n=t.node,o=s.current,r=t.__node,i=t.zIndex=s.zIndex++;if(o&&o!==t&&o.blur(!1),!e.contains(n,t.__getActive())){var a=r.find("[autofocus]")[0];!t._autofocus&&a?t._autofocus=!0:a=n,t.__focus(a)}return r.css("zIndex",i),s.current=t,r.addClass(t.className+"-focus"),t.__dispatchEvent("focus"),t},blur:function(){var e=this;if(e.destroyed||!e.open)return e;var t=arguments[0],n=e.__activeElement;return t!==!1&&e.__focus(n),e._autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.__dispatchEvent("blur"),e},addEventListener:function(e,t){var n=this;return n.__getEventListeners(e).push(t),n},removeEventListener:function(e,t){for(var n=this,o=n.__getEventListeners(e),r=0;r<o.length;r++)t===o[r]&&o.splice(r--,1);return n},__getEventListeners:function(e){var t=this,n=t.__listeners;return n||(n=t.__listeners={}),n[e]||(n[e]=[]),n[e]},__dispatchEvent:function(e){var t,n=this,o=n.__getEventListeners(e);n["on"+e]&&(t=n["on"+e].call(n));for(var r,i=0,a=o.length;i<a;i++)r=o[i].call(n),t!==!1&&(t=r);return t},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(o){}},__center:function(){var e=this,t=e.__node,n=e.fixed,o=A.width(),r=A.height(),i=n?0:M.scrollLeft(),a=n?0:M.scrollTop(),l=t.outerWidth(),s=t.outerHeight(),u=382*(r-s)/1e3+a,c=(o-l)/2+i;t.css({top:Math.max(parseFloat(u),a),left:Math.max(parseFloat(c),i)})},__follow:function(t){var n=this,o=n.__node;if(n.__align&&o.removeClass(n.__align),t=t.parentNode&&e(t),!t||!t.length)return n.__center();if(t){var r=t.offset();if(r.left*r.top<0)return n.__center()}var i=n.fixed,a=A.width(),l=A.height(),s=M.scrollLeft(),u=M.scrollTop(),c=o.outerWidth(),d=o.outerHeight(),f=t?t.outerWidth():0,_=t?t.outerHeight():0,r=n.__offset(t[0]),h=r.left,m=r.top,v=i?h-s:h,g=i?m-u:m,y=i?0:u,w=i?0:s,E=y+l-d,b=w+a-c,x={},N=n.align.split(T),L=n.className+"-",C={top:"bottom",bottom:"top",left:"right",right:"left"},k={top:"top",bottom:"top",left:"left",right:"left"},z=[{top:g-d,bottom:g+_,left:v-c,right:v+f},{top:g,bottom:g-d+_,left:v,right:v-c+f}],V={top:g+_/2-d/2,left:v+f/2-c/2},H={left:[w,b],top:[y,E]};p(N,function(e,t){z[t][e]>H[k[e]][1]&&(e=N[t]=C[e]),z[t][e]<H[k[e]][0]&&(N[t]=C[e])}),N[1]||(k[N[1]]="left"===k[N[0]]?"top":"left",z[1][N[1]]=V[k[N[1]]]),L+=N.join("-")+" "+n.className+"-follow",n.__align=L,o.addClass(L),x[k[N[0]]]=parseFloat(z[0][N[0]]),x[k[N[1]]]=parseFloat(z[1][N[1]]),o.css(x)},__offset:function(t){var n=t.parentNode,o=n?e(t).offset():{left:t.pageX,top:t.pageY};t=n?t:t.target;var r=t.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return o;var a=i.frameElement;r=e(r);var l=r.scrollLeft(),s=r.scrollTop(),u=e(a).offset(),c=u.left,d=u.top;return{top:o.top+d-s,left:o.left+c-l}}},s});
//# sourceMappingURL=dialog.js.map