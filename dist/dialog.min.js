!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],t):e.Dialog=t(e.jQuery)}(this,function(e){"use strict";function t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);default:return e.apply(t,n)}}function n(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1")}e="default"in e?e["default"]:e;var o=Array.prototype,r=o.filter,i=o.indexOf,a=o.forEach,s=r?function(e,t,n){return r.call(e,t,n)}:function(e,t,n){for(var o,r=[],i=e.length>>>0,n=arguments.length>=3?arguments[2]:e,a=0;a<i;a++)a in e&&(o=e[a],t.call(n,o,a,e)&&r.push(o));return r},l=i?function(e,t,n){return i.call(e,t,n)}:function(e,t,n){var o=e.length>>>0;for(n=Number(n)||0,n=Math[n<0?"ceil":"floor"](n),n<0&&(n=Math.max(n+o,0));n<o;n++)if(n in e&&e[n]===t)return n;return-1},c=a?function(e,t,n){a.call(e,t,n)}:function(e,t,n){arguments.length<3&&(n=e);for(var o=0,r=e.length;o<r;o++)t.call(e,e[o],o,e)},f=function(){var e,t,n=document.documentElement.style,o={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},r={WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};for(t in o)if(n.hasOwnProperty(t)){e=o[t];break}for(t in r)if(n.hasOwnProperty(t)){e+=(e?" ":"")+r[t];break}return e}(),d={alloc:[],node:e('<div class="ui-modal-dialog-mask" tableindex="0"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"}),show:function(e){l(d.alloc,e)===-1&&(d.alloc.push(e),d.node.insertBefore(e))},hide:function(e){d.alloc=s(d.alloc,function(t){return e!==t});var t=d.alloc.length;0===t?d.node.remove():d.node.insertBefore(d.alloc[t-1])}},u=/\s+/,_=e(window),h=e(document);return n.zIndex=1024,n.current=null,n.mask=d.node,n.prototype={node:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",show:function(e){var t=this;if(t.destroyed)return t;t.open&&t.__close();var n=t.__node;return t.open=!0,t.follow=e||t.follow,t.__activeElement=t.__getActive(),t.__ready||(t.__ready=!0,n.addClass(t.className).attr("role",t.modal?"alertdialog":"dialog").css("position",t.fixed?"fixed":"absolute"),n.appendTo(document.body),t.modal&&n.addClass(t.className+"-modal")),t.__innerHTML!==t.innerHTML&&(n.html(t.innerHTML),t.__innerHTML=t.innerHTML),t.modal&&d.show(t.node),n.addClass(t.className+"-show").show(),t.reset().focus(),t.__dispatchEvent("show"),t},showModal:function(){var e=this;return e.modal=!0,t(e.show,e,arguments)},__close:function(e){var t=this;arguments.length>=1&&(t.returnValue=e);var n=t.__node;if(n.removeClass(t.className+"-show"),f){var o=function(){n.hide().off(f,o).removeClass(t.className+"-close")};n.on(f,o).addClass(t.className+"-close")}else n.hide();t.modal&&(d.hide(t.node),t.modal=!1),t.open=!1},close:function(e){var n=this;return!n.destroyed&&n.open&&(t(n.__close,n,arguments),n.blur(),n.__dispatchEvent("close")),n},remove:function(){var e=this;if(e.destroyed)return e;if(e.__dispatchEvent("beforeremove")===!1)return e;n.current===e&&(n.current=null),e.open&&e.modal&&d.hide(e.node),e.__node.remove(),e.__dispatchEvent("remove");for(var t in e)delete e[t];return e},reset:function(){var e=this,t=e.follow;return t?e.__follow(t):e.__center(),e.__dispatchEvent("reset"),e},focus:function(){var t=this,o=t.node,r=n.current,i=t.__node,a=t.zIndex=n.zIndex++;if(r&&r!==this&&r.blur(!1),!e.contains(o,t.__getActive())){var s=i.find("[autofocus]")[0];!t._autofocus&&s?t._autofocus=!0:s=o,t.__focus(s)}return i.css("zIndex",a),d.node.css("zIndex",a),n.current=t,i.addClass(t.className+"-focus"),t.__dispatchEvent("focus"),t},blur:function(){var e=this,t=arguments[0],n=e.__activeElement;return t!==!1&&e.__focus(n),e._autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.__dispatchEvent("blur"),e},addEventListener:function(e,t){var n=this;return n.__getEventListeners(e).push(t),n},removeEventListener:function(e,t){for(var n=this,o=n.__getEventListeners(e),r=0;r<o.length;r++)t===o[r]&&o.splice(r--,1);return n},__getEventListeners:function(e){var t=this,n=t.__listeners;return n||(n=t.__listeners={}),n[e]||(n[e]=[]),n[e]},__dispatchEvent:function(e){var t,n=this,o=n.__getEventListeners(e);n["on"+e]&&(t=n["on"+e].call(n));for(var r,i=0,a=o.length;i<a;i++)r=o[i].call(n),t!==!1&&(t=r);return t},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(o){}},__center:function(){var e=this,t=e.__node,n=e.fixed,o=n?0:h.scrollLeft(),r=n?0:h.scrollTop(),i=_.width(),a=_.height(),s=t.width(),l=t.height(),c=(i-s)/2+o,f=382*(a-l)/1e3+r,d=e.node.style;d.left=Math.max(parseInt(c),o)+"px",d.top=Math.max(parseInt(f),r)+"px"},__follow:function(t){var n=this,o=n.__node;if(n.__align&&o.removeClass(n.__align),t=t.parentNode&&e(t),!t||!t.length)return n.__center();if(t){var r=t.offset();if(r.left*r.top<0)return n.__center()}var i=n.fixed,a=_.width(),s=_.height(),l=h.scrollLeft(),f=h.scrollTop(),d=o.width(),m=o.height(),d=t?t.outerWidth():0,m=t?t.outerHeight():0,r=n.__offset(t[0]),p=r.left,v=r.top,g=i?p-l:p,w=i?v-f:v,E=i?0:l,b=i?0:f,y=E+a-d,x=b+s-m,T={},L=n.align.split(u),N=n.className+"-",M={top:"bottom",bottom:"top",left:"right",right:"left"},A={top:"top",bottom:"top",left:"left",right:"left"},C=[{top:w-m,bottom:w+m,left:g-d,right:g+d},{top:w,bottom:w-m+m,left:g,right:g-d+d}],I={left:g+d/2-d/2,top:w+m/2-m/2},k={left:[E,y],top:[b,x]};c(L,function(e,t){C[t][e]>k[A[e]][1]&&(e=L[t]=M[e]),C[t][e]<k[A[e]][0]&&(L[t]=M[e])}),L[1]||(A[L[1]]="left"===A[L[0]]?"top":"left",C[1][L[1]]=I[A[L[1]]]),N+=L.join("-")+" "+n.className+"-follow",n.__align=N,o.addClass(N),T[A[L[0]]]=parseInt(C[0][L[0]]),T[A[L[1]]]=parseInt(C[1][L[1]]),o.css(T)},__offset:function(t){var n=t.parentNode,o=n?e(t).offset():{left:t.pageX,top:t.pageY};t=n?t:t.target;var r=t.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return o;r=e(r);var a=r.scrollLeft(),s=r.scrollTop(),l=i.frameElement,c=e(l).offset(),f=c.left,d=c.top;return{left:o.left+f-a,top:o.top+d-s}}},n});
//# sourceMappingURL=dialog.js.map