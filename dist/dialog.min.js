!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],t):e.Dialog=t(e.jQuery)}(this,function(e){"use strict";function t(e,t){var n=window.getComputedStyle,o=n?n(e,null):e.currentStyle;return{getPropertyValue:function(e){if(o)return o.getPropertyValue?o.getPropertyValue(e):("float"===prop?prop="styleFloat":e=e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),o[e])}}}function n(e){if(void 0!==h[e])return e;e=e.replace(/\w/,function(e){return e.toUpperCase()});for(var t,n=0,o=m.length;n<o;n++)if(void 0!==h[m[n]+e])return t=m[n],t+e;return!1}function o(e){e=e.split(/\s*,\s*/);for(var t=0,n=e.length;t<n;t++)if(parseFloat(e[t])>0)return!0;return!1}function r(e){return p&&"none"!==e.getPropertyValue(p+"-name")&&o(e.getPropertyValue(p+"-duration"))}function i(e){return v&&"none"!==e.getPropertyValue(v+"-property")&&Utils.hasDuration(e.getPropertyValue(v+"-duration"))}function a(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1")}e="default"in e?e["default"]:e;var s=Array.prototype,l=s.filter,u=s.indexOf,d=s.forEach,f=l?function(e,t,n){return l.call(e,t,n)}:function(e,t,n){for(var o,r=[],i=e.length>>>0,n=arguments.length>=3?arguments[2]:e,a=0;a<i;a++)a in e&&(o=e[a],t.call(n,o,a,e)&&r.push(o));return r},c=u?function(e,t,n){return u.call(e,t,n)}:function(e,t,n){var o=e.length>>>0;for(n=Number(n)||0,n=Math[n<0?"ceil":"floor"](n),n<0&&(n=Math.max(n+o,0));n<o;n++)if(n in e&&e[n]===t)return n;return-1},_=d?function(e,t,n){d.call(e,t,n)}:function(e,t,n){arguments.length<3&&(n=e);for(var o=0,r=e.length;o<r;o++)t.call(e,e[o],o,e)},h=document.documentElement.style,m=["Webkit","Moz","O","ms","Khtml"],p=n("animation"),v=n("transition"),g={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",KhtmlAnimation:"khtmlAnimationEnd"},w={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",KhtmlTransition:"khtmlTransitionEnd"},y={alloc:[],node:e('<div class="ui-modal-dialog-mask" tableindex="0"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"}),show:function(e){c(y.alloc,e)===-1&&(y.alloc.push(e),y.node.insertBefore(e))},hide:function(e){y.alloc=f(y.alloc,function(t){return e!==t});var t=y.alloc.length;0===t?y.node.remove():y.node.insertBefore(y.alloc[t-1])}},E=/\s+/,b=e(window),x=e(document);return a.zIndex=1024,a.current=null,a.mask=y.node,a.prototype={node:null,follow:null,fixed:!1,destroyed:!0,open:!1,returnValue:void 0,autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",__show:function(e){var t=this;if(t.destroyed)return t;var n=t.__node;return t.open=!0,t.__activeElement=t.__getActive(),t.follow=arguments.length?e:t.follow,t.__ready||(n.addClass(t.className).css("position",t.fixed?"fixed":"absolute"),n.appendTo(document.body),t.__ready=!0),t.__innerHTML!==t.innerHTML&&(n.html(t.innerHTML),t.__innerHTML=t.innerHTML),t.modal&&(y.show(t.node),n.addClass(t.className+"-modal")),n.attr("role",t.modal?"alertdialog":"dialog").removeClass(t.className+"-close").addClass(t.className+"-show").show(),t.reset().focus(),t.__dispatchEvent("show"),t},show:function(e){var t=this;if(t.modal){var n=t.__node;t.open&&y.hide(t.node),n.removeClass(t.className+"-modal")}return t.modal=!1,t.__show(e)},showModal:function(e){var t=this;t.__node;return t.modal=!0,t.__show(e)},close:function(e){var n=this;if(n.destroyed||!n.open)return n;if(n.__dispatchEvent("beforeclose")===!1)return n;void 0!==e&&(n.returnValue=e);var o=n.node,a=n.__node,s=function(){a.hide(),n.modal&&y.hide(n.node),n.open=!1,n.blur(),n.__dispatchEvent("close")};if(a.removeClass(n.className+"-show").addClass(n.className+"-close"),p||v){var l,u=0,d=t(o);if(r(d)&&(u++,l=g[p]),i(d)&&(u++,l+=(l?" ":"")+w[v]),u){var f=function(){--u||(s(),a.off(l,f))};a.on(l,f)}else s()}else s();return n},remove:function(){var e=this;if(e.destroyed)return e;if(e.__dispatchEvent("beforeremove")===!1)return e;a.current===e&&(a.current=null),e.open&&e.modal&&y.hide(e.node),e.__node.remove(),e.__dispatchEvent("remove");for(var t in e)delete e[t];return e},reset:function(){var e=this;if(e.destroyed||!e.open)return e;var t=e.follow;return t?e.__follow(t):e.__center(),e.__dispatchEvent("reset"),e},focus:function(){var t=this;if(t.destroyed||!t.open)return t;var n=t.node,o=a.current,r=t.__node,i=t.zIndex=a.zIndex++;if(o&&o!==t&&o.blur(!1),!e.contains(n,t.__getActive())){var s=r.find("[autofocus]")[0];!t._autofocus&&s?t._autofocus=!0:s=n,t.__focus(s)}return r.css("zIndex",i),y.node.css("zIndex",i),a.current=t,r.addClass(t.className+"-focus"),t.__dispatchEvent("focus"),t},blur:function(){var e=this;if(e.destroyed||!e.open)return e;var t=arguments[0],n=e.__activeElement;return t!==!1&&e.__focus(n),e._autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.__dispatchEvent("blur"),e},addEventListener:function(e,t){var n=this;return n.__getEventListeners(e).push(t),n},removeEventListener:function(e,t){for(var n=this,o=n.__getEventListeners(e),r=0;r<o.length;r++)t===o[r]&&o.splice(r--,1);return n},__getEventListeners:function(e){var t=this,n=t.__listeners;return n||(n=t.__listeners={}),n[e]||(n[e]=[]),n[e]},__dispatchEvent:function(e){var t,n=this,o=n.__getEventListeners(e);n["on"+e]&&(t=n["on"+e].call(n));for(var r,i=0,a=o.length;i<a;i++)r=o[i].call(n),t!==!1&&(t=r);return t},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(o){}},__center:function(){var e=this,t=e.__node,n=e.fixed,o=n?0:x.scrollLeft(),r=n?0:x.scrollTop(),i=b.width(),a=b.height(),s=t.width(),l=t.height(),u=(i-s)/2+o,d=382*(a-l)/1e3+r,f=e.node.style;f.left=Math.max(parseInt(u),o)+"px",f.top=Math.max(parseInt(d),r)+"px"},__follow:function(t){var n=this,o=n.__node;if(n.__align&&o.removeClass(n.__align),t=t.parentNode&&e(t),!t||!t.length)return n.__center();if(t){var r=t.offset();if(r.left*r.top<0)return n.__center()}var i=n.fixed,a=b.width(),s=b.height(),l=x.scrollLeft(),u=x.scrollTop(),d=o.width(),f=o.height(),d=t?t.outerWidth():0,f=t?t.outerHeight():0,r=n.__offset(t[0]),c=r.left,h=r.top,m=i?c-l:c,p=i?h-u:h,v=i?0:l,g=i?0:u,w=v+a-d,y=g+s-f,T={},M=n.align.split(E),N=n.className+"-",L={top:"bottom",bottom:"top",left:"right",right:"left"},A={top:"top",bottom:"top",left:"left",right:"left"},C=[{top:p-f,bottom:p+f,left:m-d,right:m+d},{top:p,bottom:p-f+f,left:m,right:m-d+d}],z={left:m+d/2-d/2,top:p+f/2-f/2},V={left:[v,w],top:[g,y]};_(M,function(e,t){C[t][e]>V[A[e]][1]&&(e=M[t]=L[e]),C[t][e]<V[A[e]][0]&&(M[t]=L[e])}),M[1]||(A[M[1]]="left"===A[M[0]]?"top":"left",C[1][M[1]]=z[A[M[1]]]),N+=M.join("-")+" "+n.className+"-follow",n.__align=N,o.addClass(N),T[A[M[0]]]=parseInt(C[0][M[0]]),T[A[M[1]]]=parseInt(C[1][M[1]]),o.css(T)},__offset:function(t){var n=t.parentNode,o=n?e(t).offset():{left:t.pageX,top:t.pageY};t=n?t:t.target;var r=t.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return o;r=e(r);var a=r.scrollLeft(),s=r.scrollTop(),l=i.frameElement,u=e(l).offset(),d=u.left,f=u.top;return{left:o.left+d-a,top:o.top+f-s}}},a});
//# sourceMappingURL=dialog.js.map