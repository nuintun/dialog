!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],e):t.Dialog=e(t.jQuery)}(this,function(t){"use strict";function e(t,e){var n=window.getComputedStyle,o=n?n(t,null):t.currentStyle;return{getPropertyValue:function(t){if(o)return o.getPropertyValue?o.getPropertyValue(t):(t=t.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()}),o.getAttribute?o.getAttribute(t):o[t])}}}function n(t){for(var e in t)if(t.hasOwnProperty(e)&&void 0!==g[e])return e}function o(t){return 1e3*Number(t.slice(0,-1))}function r(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,p(e,function(e,n){return o(e)+o(t[n])}))}function i(t){return t?t.split(", "):[]}function a(t){var n,o,a,s=e(t),l=i(s.getPropertyValue(b+"-delay")),u=i(s.getPropertyValue(b+"-duration")),c=r(l,u),d=i(s.getPropertyValue(w+"-delay")),f=i(s.getPropertyValue(w+"-duration")),_=r(d,f);return a=Math.max(c,_),n=a>0?c>_?b:w:null,o=n?n===b?u.length:f.length:0,{type:n,count:o,timeout:a}}function s(t,e){if(!w&&!b)return e();var n=t[0],o=a(n),r=o.type;if(!r)return e();var i=0,s=o.count,l=o.timeout,u=r===b?E[b]:y[w],c=function(){t.off(u,d),e()},d=function(t){t.target===n&&++i>=s&&c()};setTimeout(function(){i<s&&c()},l+1),t.on(u,d)}function l(){var e=this;e.destroyed=!1,e.node=document.createElement("div"),e.__node=t(e.node).attr("tabindex","-1").css({display:"none",position:"absolute",outline:0})}t="default"in t?t["default"]:t;var u=Array.prototype,c=u.filter,d=u.indexOf,f=u.forEach,_=u.map,h=c?function(t,e,n){return c.call(t,e,n)}:function(t,e,n){for(var o,r=[],i=t.length>>>0,n=arguments.length>=3?arguments[2]:t,a=0;a<i;a++)a in t&&(o=t[a],e.call(n,o,a,t)&&r.push(o));return r},m=d?function(t,e,n){return d.call(t,e,n)}:function(t,e,n){var o=t.length>>>0;for(n=Number(n)||0,n=Math[n<0?"ceil":"floor"](n),n<0&&(n=Math.max(n+o,0));n<o;n++)if(n in t&&t[n]===e)return n;return-1},v=f?function(t,e,n){f.call(t,e,n)}:function(t,e,n){arguments.length<3&&(n=t);for(var o=0,r=t.length;o<r;o++)e.call(t,t[o],o,t)},p=_?function(t,e,n){return _.call(t,e,n)}:function(t,e,n){var o=this.length>>>0,r=new Array(o);arguments.length<3&&(n=t);for(var i=0;i<o;i++)i in t&&(r[i]=fn.call(n,t[i],i,t));return r},g=document.documentElement.style,y={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",KhtmlAnimation:"khtmlAnimationEnd"},E={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",KhtmlTransition:"khtmlTransitionEnd"},w=n(y),b=n(E),x={alloc:[],node:t('<div tabindex="0"></div>').css({position:"fixed",top:0,left:0,width:"100%",height:"100%",userSelect:"none"}),shim:t('<div tabindex="0"></div>').css({width:0,height:0,opacity:0}),zIndex:function(t){t=Math.max(0,--t),x.node.css("z-index",t)},attach:function(t){var e=t.node,n=t.className+"-backdrop";x.node.addClass(n).insertBefore(e),x.shim.insertAfter(e)},show:function(t){m(x.alloc,t)===-1&&(x.attach(t),x.alloc.push(t))},hide:function(t){x.alloc=h(x.alloc,function(e){return t!==e});var e=x.alloc.length;0===e?(x.node.remove(),x.shim.remove()):(t=x.alloc[e-1],x.zIndex(t.zIndex),x.attach(t))}},A=/\s+/,T=t(window),M=t(document);return l.zIndex=1024,l.active=null,l.backdrop=x.node[0],M.on("focusin",function(t){var e=l.active;if(e&&e.modal){var n=t.target,o=e.node;n===o||o.contains(n)||e.focus()}}),l.prototype={node:null,anchor:null,fixed:!1,destroyed:!0,open:!1,returnValue:void 0,autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",constructor:l,__show:function(t){var e=this;if(e.destroyed)return e;var n=e.__node;return e.open=!0,e.anchor=t||null,e.__activeElement=e.__getActive(),e.__ready||(n.addClass(e.className).css("position",e.fixed?"fixed":"absolute"),n.appendTo(document.body),e.__ready=!0),e.__innerHTML!==e.innerHTML&&(n.html(e.innerHTML),e.__innerHTML=e.innerHTML),e.modal&&(x.show(e),n.addClass(e.className+"-modal")),n.attr("role",e.modal?"alertdialog":"dialog").removeClass(e.className+"-close").addClass(e.className+"-show"),e.reset(),n.show(),e.__dispatchEvent("show"),e.focus(),e},show:function(t){var e=this;if(e.modal){var n=e.__node;e.open&&x.hide(e),n.removeClass(e.className+"-modal")}return e.modal=!1,e.__show(t)},showModal:function(t){var e=this;e.__node;return e.modal=!0,e.__show(t)},close:function(t){var e=this;if(e.destroyed||!e.open)return e;if(e.__dispatchEvent("beforeclose")===!1)return e;void 0!==t&&(e.returnValue=t);var n=(e.node,e.__node);return n.removeClass(e.className+"-show").addClass(e.className+"-close"),e.blur(),s(n,function(){n.hide(),e.modal&&x.hide(e),e.open=!1,e.__dispatchEvent("close")}),e},remove:function(){var t=this;if(t.destroyed)return t;if(t.__dispatchEvent("beforeremove")===!1)return t;t.__resetActive(),t.open&&t.modal&&x.hide(t),t.__node.remove(),t.destroyed=!0,t.__dispatchEvent("remove");for(var e in t)delete t[e];return t},reset:function(){var t=this;if(t.destroyed||!t.open)return t;t.__align&&(t.__node.removeClass(t.__align),t.__align=null);var e=t.anchor;return e?t.__follow(e):t.__center(),t.__dispatchEvent("reset"),t},__resetActive:function(){l.active===this&&(l.active=null)},focus:function(){var e=this;if(e.destroyed||!e.open)return e;var n=e.node,o=e.__node,r=l.active;if(r&&r!==e&&r.blur(!1),!t.contains(n,e.__getActive())){var i=o.find("[autofocus]")[0];!e.__autofocus&&i?e.__autofocus=!0:i=n,e.__focus(i)}if(r!==e){var a=e.zIndex=l.zIndex++;x.zIndex(a),o.css("zIndex",a),o.addClass(e.className+"-focus"),e.__dispatchEvent("focus"),l.active=e}return e},blur:function(){var t=this;if(t.destroyed||!t.open)return t;var e=arguments[0],n=t.__activeElement;return t.__resetActive(),e!==!1&&t.__focus(n),t.__autofocus=!1,t.__node.removeClass(t.className+"-focus"),t.__dispatchEvent("blur"),t},addEventListener:function(t,e){var n=this;return n.__getEventListeners(t).push(e),n},removeEventListener:function(t,e){for(var n=this,o=n.__getEventListeners(t),r=0;r<o.length;r++)e===o[r]&&o.splice(r--,1);return n},__getEventListeners:function(t){var e=this,n=e.__listeners;return n||(n=e.__listeners={}),n[t]||(n[t]=[]),n[t]},__dispatchEvent:function(t){var e,n=this,o=n.__getEventListeners(t);n["on"+t]&&(e=n["on"+t].call(n));for(var r,i=0,a=o.length;i<a;i++)r=o[i].call(n),e!==!1&&(e=r);return e},__focus:function(t){try{this.autofocus&&!/^iframe$/i.test(t.nodeName)&&t.focus()}catch(e){}},__getActive:function(){try{var t=document.activeElement,e=t.contentDocument,n=e&&e.activeElement||t;return n}catch(o){}},__center:function(){var t=this,e=t.__node,n=t.fixed,o=T.width(),r=T.height(),i=n?0:M.scrollLeft(),a=n?0:M.scrollTop(),s=e.outerWidth(),l=e.outerHeight(),u=382*(r-l)/1e3+a,c=(o-s)/2+i;e.css({top:Math.max(parseFloat(u),a),left:Math.max(parseFloat(c),i)})},__follow:function(e){var n=this,o=n.__node;if(e=e.parentNode&&t(e),!e||!e.length)return n.__center();if(e){var r=e.offset();if(r.left*r.top<0)return n.__center()}var i=n.fixed,a=T.width(),s=T.height(),l=M.scrollLeft(),u=M.scrollTop(),c=o.outerWidth(),d=o.outerHeight(),f=e?e.outerWidth():0,_=e?e.outerHeight():0,r=n.__offset(e[0]),h=r.left,m=r.top,p=i?h-l:h,g=i?m-u:m,y=i?0:u,E=i?0:l,w=y+s-d,b=E+a-c,x={},N=n.align.split(A),L=n.className+"-",C={top:"bottom",bottom:"top",left:"right",right:"left"},z={top:"top",bottom:"top",left:"left",right:"left"},V=[{top:g-d,bottom:g+_,left:p-c,right:p+f},{top:g,bottom:g-d+_,left:p,right:p-c+f}],H={top:g+_/2-d/2,left:p+f/2-c/2},k={left:[E,b],top:[y,w]};v(N,function(t,e){V[e][t]>k[z[t]][1]&&(t=N[e]=C[t]),V[e][t]<k[z[t]][0]&&(N[e]=C[t])}),N[1]||(z[N[1]]="left"===z[N[0]]?"top":"left",V[1][N[1]]=H[z[N[1]]]),L+=N.join("-")+" "+n.className+"-follow",n.__align=L,o.addClass(L),x[z[N[0]]]=parseFloat(V[0][N[0]]),x[z[N[1]]]=parseFloat(V[1][N[1]]),o.css(x)},__offset:function(e){var n=e.parentNode,o=n?t(e).offset():{left:e.pageX,top:e.pageY};e=n?e:e.target;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return o;var a=i.frameElement;r=t(r);var s=r.scrollLeft(),l=r.scrollTop(),u=t(a).offset(),c=u.left,d=u.top;return{top:o.top+d-l,left:o.left+c-s}}},l});
//# sourceMappingURL=dialog.js.map