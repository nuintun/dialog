!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],t):e.Dialog=t(e.jQuery)}(this,function(e){"use strict";function t(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2]);default:return e.apply(t,o)}}function o(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1")}e="default"in e?e["default"]:e;var n=Array.prototype,r=n.filter,l=n.indexOf,a=n.forEach,i=r?function(e,t,o){return r.call(e,t,o)}:function(e,t,o){for(var n,r=[],l=e.length>>>0,o=arguments.length>=3?arguments[2]:e,a=0;a<l;a++)a in e&&(n=e[a],t.call(o,n,a,e)&&r.push(n));return r},s=l?function(e,t,o){return l.call(e,t,o)}:function(e,t,o){var n=e.length>>>0;for(o=Number(o)||0,o=Math[o<0?"ceil":"floor"](o),o<0&&(o=Math.max(o+n,0));o<n;o++)if(o in e&&e[o]===t)return o;return-1},c=a?function(e,t,o){a.call(e,t,o)}:function(e,t,o){arguments.length<3&&(o=e);for(var n=0,r=e.length;n<r;n++)t.call(e,e[n],n,e)},u={alloc:[],node:e('<div class="ui-modal-dialog-mask" tableindex="0"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"}),show:function(e){s(u.alloc,e)===-1&&(u.alloc.push(e),u.node.insertBefore(e))},hide:function(e){u.alloc=i(u.alloc,function(t){return e!==t});var t=u.alloc.length;0===t?u.node.remove():u.node.insertBefore(u.alloc[t-1])}},f=/\s+/,d=e(window),_=e(document);return o.zIndex=1024,o.current=null,o.mask=u.node,o.prototype={node:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",show:function(e){var t=this;if(t.destroyed)return t;t.open&&t.__close();var o=t.__node;return t.open=!0,t.follow=e||t.follow,t.__activeElement=t.__getActive(),t.__ready||(t.__ready=!0,o.addClass(t.className).attr("role",t.modal?"modal-dialog":"dialog").css("position",t.fixed?"fixed":"absolute"),o.appendTo(document.body),t.modal&&o.addClass(t.className+"-modal")),t.__innerHTML!==t.innerHTML&&(o.html(t.innerHTML),t.__innerHTML=t.innerHTML),t.modal&&u.show(t.node),o.addClass(t.className+"-show").show(),t.reset().focus(),t.__dispatchEvent("show"),t},showModal:function(){var e=this;return e.modal=!0,t(e.show,e,arguments)},__close:function(e){var t=this;arguments.length>=1&&(t.returnValue=e),t.__node.hide().removeClass(t.className+"-show"),t.modal&&(u.hide(t.node),t.modal=!1),t.open=!1},close:function(e){var o=this;return!o.destroyed&&o.open&&(t(o.__close,o,arguments),o.blur(),o.__dispatchEvent("close")),o},remove:function(){var e=this;if(e.destroyed)return e;if(e.__dispatchEvent("beforeremove")===!1)return e;o.current===e&&(o.current=null),e.open&&e.modal&&u.hide(e.node),e.__node.remove(),e.__dispatchEvent("remove");for(var t in e)delete e[t];return e},reset:function(){var e=this,t=e.follow;return t?e.__follow(t):e.__center(),e.__dispatchEvent("reset"),e},focus:function(){var t=this,n=t.node,r=o.current,l=t.__node,a=t.zIndex=o.zIndex++;if(r&&r!==this&&r.blur(!1),!e.contains(n,t.__getActive())){var i=l.find("[autofocus]")[0];!t._autofocus&&i?t._autofocus=!0:i=n,t.__focus(i)}return l.css("zIndex",a),u.node.css("zIndex",a),o.current=t,l.addClass(t.className+"-focus"),t.__dispatchEvent("focus"),t},blur:function(){var e=this,t=arguments[0],o=e.__activeElement;return t!==!1&&e.__focus(o),e._autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.__dispatchEvent("blur"),e},addEventListener:function(e,t){var o=this;return o.__getEventListeners(e).push(t),o},removeEventListener:function(e,t){for(var o=this,n=o.__getEventListeners(e),r=0;r<n.length;r++)t===n[r]&&n.splice(r--,1);return o},__getEventListeners:function(e){var t=this,o=t.__listeners;return o||(o=t.__listeners={}),o[e]||(o[e]=[]),o[e]},__dispatchEvent:function(e){var t,o=this,n=o.__getEventListeners(e);o["on"+e]&&(t=o["on"+e].call(o));for(var r=0,l=n.length;r<l;r++)t===!1?n[r].call(o):t=n[r].call(o);return t},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,o=t&&t.activeElement||e;return o}catch(n){}},__center:function(){var e=this,t=e.__node,o=e.fixed,n=o?0:_.scrollLeft(),r=o?0:_.scrollTop(),l=d.width(),a=d.height(),i=t.width(),s=t.height(),c=(l-i)/2+n,u=382*(a-s)/1e3+r,f=e.node.style;f.left=Math.max(parseInt(c),n)+"px",f.top=Math.max(parseInt(u),r)+"px"},__follow:function(t){var o=this,n=o.__node;if(o.__align&&n.removeClass(o.__align),t=t.parentNode&&e(t),!t||!t.length)return o.__center();if(t){var r=t.offset();if(r.left*r.top<0)return o.__center()}var l=o.fixed,a=d.width(),i=d.height(),s=_.scrollLeft(),u=_.scrollTop(),h=n.width(),p=n.height(),h=t?t.outerWidth():0,p=t?t.outerHeight():0,r=o.__offset(t[0]),v=r.left,m=r.top,g=l?v-s:v,w=l?m-u:m,y=l?0:s,x=l?0:u,E=y+a-h,b=x+i-p,L={},N=o.align.split(f),M=o.className+"-",T={top:"bottom",bottom:"top",left:"right",right:"left"},I={top:"top",bottom:"top",left:"left",right:"left"},C=[{top:w-p,bottom:w+p,left:g-h,right:g+h},{top:w,bottom:w-p+p,left:g,right:g-h+h}],H={left:g+h/2-h/2,top:w+p/2-p/2},j={left:[y,E],top:[x,b]};c(N,function(e,t){C[t][e]>j[I[e]][1]&&(e=N[t]=T[e]),C[t][e]<j[I[e]][0]&&(N[t]=T[e])}),N[1]||(I[N[1]]="left"===I[N[0]]?"top":"left",C[1][N[1]]=H[I[N[1]]]),M+=N.join("-")+" "+o.className+"-follow",o.__align=M,n.addClass(M),L[I[N[0]]]=parseInt(C[0][N[0]]),L[I[N[1]]]=parseInt(C[1][N[1]]),n.css(L)},__offset:function(t){var o=t.parentNode,n=o?e(t).offset():{left:t.pageX,top:t.pageY};t=o?t:t.target;var r=t.ownerDocument,l=r.defaultView||r.parentWindow;if(l==window)return n;r=e(r);var a=r.scrollLeft(),i=r.scrollTop(),s=l.frameElement,c=e(s).offset(),u=c.left,f=c.top;return{left:n.left+u-a,top:n.top+f-i}}},o});
//# sourceMappingURL=dialog.js.map