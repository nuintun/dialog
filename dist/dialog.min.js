!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],t):e.Dialog=t(e.jQuery)}(this,function(e){"use strict";function t(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1")}e="default"in e?e["default"]:e;var n=Array.prototype,o=n.filter,r=n.indexOf,i=n.forEach,a=o?function(e,t,n){return o.call(e,t,n)}:function(e,t,n){for(var o,r=[],i=e.length>>>0,n=arguments.length>=3?arguments[2]:e,a=0;a<i;a++)a in e&&(o=e[a],t.call(n,o,a,e)&&r.push(o));return r},s=r?function(e,t,n){return r.call(e,t,n)}:function(e,t,n){var o=e.length>>>0;for(n=Number(n)||0,n=Math[n<0?"ceil":"floor"](n),n<0&&(n=Math.max(n+o,0));n<o;n++)if(n in e&&e[n]===t)return n;return-1},l=i?function(e,t,n){i.call(e,t,n)}:function(e,t,n){arguments.length<3&&(n=e);for(var o=0,r=e.length;o<r;o++)t.call(e,e[o],o,e)},d=function(){var e,t,n=document.documentElement.style,o={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},r={WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};for(t in o)if(n.hasOwnProperty(t)){e=o[t];break}for(t in r)if(n.hasOwnProperty(t)){e+=(e?" ":"")+r[t];break}return e}(),c={alloc:[],node:e('<div class="ui-modal-dialog-mask" tableindex="0"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"}),show:function(e){s(c.alloc,e)===-1&&(c.alloc.push(e),c.node.insertBefore(e))},hide:function(e){c.alloc=a(c.alloc,function(t){return e!==t});var t=c.alloc.length;0===t?c.node.remove():c.node.insertBefore(c.alloc[t-1])}},f=/\s+/,u=e(window),_=e(document);return t.zIndex=1024,t.current=null,t.mask=c.node,t.prototype={node:null,fixed:!1,destroyed:!0,open:!1,returnValue:void 0,autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",show:function(e){var t=this;if(t.destroyed)return t;t.open&&t.__close();var n=t.__node;return t.open=!0,t.follow=e||t.follow,t.__activeElement=t.__getActive(),t.__ready||(t.__ready=!0,n.addClass(t.className).attr("role",t.modal?"alertdialog":"dialog").css("position",t.fixed?"fixed":"absolute"),n.appendTo(document.body),t.modal&&n.addClass(t.className+"-modal")),t.__innerHTML!==t.innerHTML&&(n.html(t.innerHTML),t.__innerHTML=t.innerHTML),t.modal&&c.show(t.node),n.addClass(t.className+"-show").show(),t.reset().focus(),t.__dispatchEvent("show"),t},showModal:function(e){var t=this;return t.modal=!0,t.show(e)},__close:function(e,t){var n=this;void 0!==e&&(n.returnValue=e);var o=n.__node;if(o.removeClass(n.className+"-show"),t&&d){var r=function(){n.__dispatchEvent("animationend"),o.hide().off(d,r).removeClass(n.className+"-close")};o.on(d,r).addClass(n.className+"-close")}else o.hide();n.modal&&(c.hide(n.node),n.modal=!1),n.open=!1},close:function(e){var t=this;return!t.destroyed&&t.open&&(t.__close(e,!0),t.blur(),t.__dispatchEvent("close")),t},remove:function(){var e=this;if(e.destroyed)return e;if(e.__dispatchEvent("beforeremove")===!1)return e;t.current===e&&(t.current=null),e.open&&e.modal&&c.hide(e.node),e.__node.remove(),e.__dispatchEvent("remove");for(var n in e)delete e[n];return e},reset:function(){var e=this,t=e.follow;return t?e.__follow(t):e.__center(),e.__dispatchEvent("reset"),e},focus:function(){var n=this,o=n.node,r=t.current,i=n.__node,a=n.zIndex=t.zIndex++;if(r&&r!==this&&r.blur(!1),!e.contains(o,n.__getActive())){var s=i.find("[autofocus]")[0];!n._autofocus&&s?n._autofocus=!0:s=o,n.__focus(s)}return i.css("zIndex",a),c.node.css("zIndex",a),t.current=n,i.addClass(n.className+"-focus"),n.__dispatchEvent("focus"),n},blur:function(){var e=this,t=arguments[0],n=e.__activeElement;return t!==!1&&e.__focus(n),e._autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.__dispatchEvent("blur"),e},addEventListener:function(e,t){var n=this;return n.__getEventListeners(e).push(t),n},removeEventListener:function(e,t){for(var n=this,o=n.__getEventListeners(e),r=0;r<o.length;r++)t===o[r]&&o.splice(r--,1);return n},__getEventListeners:function(e){var t=this,n=t.__listeners;return n||(n=t.__listeners={}),n[e]||(n[e]=[]),n[e]},__dispatchEvent:function(e){var t,n=this,o=n.__getEventListeners(e);n["on"+e]&&(t=n["on"+e].call(n));for(var r,i=0,a=o.length;i<a;i++)r=o[i].call(n),t!==!1&&(t=r);return t},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,n=t&&t.activeElement||e;return n}catch(o){}},__center:function(){var e=this,t=e.__node,n=e.fixed,o=n?0:_.scrollLeft(),r=n?0:_.scrollTop(),i=u.width(),a=u.height(),s=t.width(),l=t.height(),d=(i-s)/2+o,c=382*(a-l)/1e3+r,f=e.node.style;f.left=Math.max(parseInt(d),o)+"px",f.top=Math.max(parseInt(c),r)+"px"},__follow:function(t){var n=this,o=n.__node;if(n.__align&&o.removeClass(n.__align),t=t.parentNode&&e(t),!t||!t.length)return n.__center();if(t){var r=t.offset();if(r.left*r.top<0)return n.__center()}var i=n.fixed,a=u.width(),s=u.height(),d=_.scrollLeft(),c=_.scrollTop(),h=o.width(),m=o.height(),h=t?t.outerWidth():0,m=t?t.outerHeight():0,r=n.__offset(t[0]),v=r.left,p=r.top,g=i?v-d:v,w=i?p-c:p,E=i?0:d,b=i?0:c,y=E+a-h,x=b+s-m,T={},L=n.align.split(f),N=n.className+"-",M={top:"bottom",bottom:"top",left:"right",right:"left"},A={top:"top",bottom:"top",left:"left",right:"left"},C=[{top:w-m,bottom:w+m,left:g-h,right:g+h},{top:w,bottom:w-m+m,left:g,right:g-h+h}],I={left:g+h/2-h/2,top:w+m/2-m/2},k={left:[E,y],top:[b,x]};l(L,function(e,t){C[t][e]>k[A[e]][1]&&(e=L[t]=M[e]),C[t][e]<k[A[e]][0]&&(L[t]=M[e])}),L[1]||(A[L[1]]="left"===A[L[0]]?"top":"left",C[1][L[1]]=I[A[L[1]]]),N+=L.join("-")+" "+n.className+"-follow",n.__align=N,o.addClass(N),T[A[L[0]]]=parseInt(C[0][L[0]]),T[A[L[1]]]=parseInt(C[1][L[1]]),o.css(T)},__offset:function(t){var n=t.parentNode,o=n?e(t).offset():{left:t.pageX,top:t.pageY};t=n?t:t.target;var r=t.ownerDocument,i=r.defaultView||r.parentWindow;if(i==window)return o;r=e(r);var a=r.scrollLeft(),s=r.scrollTop(),l=i.frameElement,d=e(l).offset(),c=d.left,f=d.top;return{left:o.left+c-a,top:o.top+f-s}}},t});
//# sourceMappingURL=dialog.js.map