!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("dialog",["jquery"],t):e.Dialog=t(e.jQuery)}(this,function(e){"use strict";function t(e){if(void 0!==c[e])return{name:e,event:e+"end"};var t;e=e.replace(/(\w)/,function(e,t){return t.toUpperCase()});for(var o=0,n=d.length;o<n;o++)if(void 0!==c[d[o]+e])return t=d[o],{property:t+e,event:t+e+"End"};return!1}function o(e,t){var o=window.getComputedStyle,n=o?o(e,null):e.currentStyle;return{getPropertyValue:function(e){if(n)return n.getPropertyValue?n.getPropertyValue(e):("float"===prop?prop="styleFloat":e=e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),n[e])}}}function n(){var t=this;t.destroyed=!1,t.node=document.createElement("div"),t.__node=e(t.node).css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1")}e="default"in e?e["default"]:e;var r=Array.prototype,a=r.filter,l=r.indexOf,i=r.forEach,s=a?function(e,t,o){return a.call(e,t,o)}:function(e,t,o){for(var n,r=[],a=e.length>>>0,o=arguments.length>=3?arguments[2]:e,l=0;l<a;l++)l in e&&(n=e[l],t.call(o,n,l,e)&&r.push(n));return r},u=l?function(e,t,o){return l.call(e,t,o)}:function(e,t,o){var n=e.length>>>0;for(o=Number(o)||0,o=Math[o<0?"ceil":"floor"](o),o<0&&(o=Math.max(o+n,0));o<n;o++)if(o in e&&e[o]===t)return o;return-1},f=i?function(e,t,o){i.call(e,t,o)}:function(e,t,o){arguments.length<3&&(o=e);for(var n=0,r=e.length;n<r;n++)t.call(e,e[n],n,e)},c=document.documentElement.style,d=["Webkit","Moz","O","ms","Khtml"],_=t("animation"),p=t("transition"),h={alloc:[],node:e('<div class="ui-modal-dialog-mask" tableindex="0"></div>').css({position:"fixed",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"}),show:function(e){u(h.alloc,e)===-1&&(h.alloc.push(e),h.node.insertBefore(e))},hide:function(e){h.alloc=s(h.alloc,function(t){return e!==t});var t=h.alloc.length;0===t?h.node.remove():h.node.insertBefore(h.alloc[t-1])}},v=/\s+/,m=e(window),g=e(document);return n.zIndex=1024,n.current=null,n.mask=h.node,n.prototype={node:null,follow:null,fixed:!1,destroyed:!0,open:!1,returnValue:void 0,autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-dialog",__show:function(e){var t=this;if(t.destroyed)return t;var o=t.__node;return t.open=!0,t.__activeElement=t.__getActive(),t.follow=arguments.length?e:t.follow,t.__ready||(o.addClass(t.className).css("position",t.fixed?"fixed":"absolute"),o.appendTo(document.body),t.__ready=!0),t.__innerHTML!==t.innerHTML&&(o.html(t.innerHTML),t.__innerHTML=t.innerHTML),t.modal&&(h.show(t.node),o.addClass(t.className+"-modal")),o.attr("role",t.modal?"alertdialog":"dialog").addClass(t.className+"-show").show(),t.reset().focus(),t.__dispatchEvent("show"),t},show:function(e){var t=this;if(t.modal){var o=t.__node;t.open&&h.hide(t.node),o.removeClass(t.className+"-modal")}return t.modal=!1,t.__show(e)},showModal:function(e){var t=this;t.__node;return t.modal=!0,t.__show(e)},close:function(e){var t=this;if(!t.destroyed&&t.open){if(t.__dispatchEvent("beforeclose")===!1)return t;void 0!==e&&(t.returnValue=e);var n=t.node,r=t.__node,a=function(){t.modal&&h.hide(t.node),r.hide().removeClass(t.className+"-close"),t.open=!1,t.blur(),t.__dispatchEvent("close")};if(r.removeClass(t.className+"-show").addClass(t.className+"-close"),_||p){var l,i=0,s=o(n);if(_&&"none"!==s.getPropertyValue(_.name+"-name")&&parseFloat(s.getPropertyValue(_.name+"-duration"))>0&&(i++,l=_.event),p&&"none"!==s.getPropertyValue(p.name+"-property")&&parseFloat(s.getPropertyValue(p.name+"-duration"))>0&&(i++,l+=(l?" ":"")+p.event),i){var u=function(){--i||(a(),r.off(l,u))};r.on(l,u)}else a()}else a()}return t},remove:function(){var e=this;if(e.destroyed)return e;if(e.__dispatchEvent("beforeremove")===!1)return e;n.current===e&&(n.current=null),e.open&&e.modal&&h.hide(e.node),e.__node.remove(),e.__dispatchEvent("remove");for(var t in e)delete e[t];return e},reset:function(){var e=this,t=e.follow;return t?e.__follow(t):e.__center(),e.__dispatchEvent("reset"),e},focus:function(){var t=this,o=t.node,r=n.current,a=t.__node,l=t.zIndex=n.zIndex++;if(r&&r!==this&&r.blur(!1),!e.contains(o,t.__getActive())){var i=a.find("[autofocus]")[0];!t._autofocus&&i?t._autofocus=!0:i=o,t.__focus(i)}return a.css("zIndex",l),h.node.css("zIndex",l),n.current=t,a.addClass(t.className+"-focus"),t.__dispatchEvent("focus"),t},blur:function(){var e=this,t=arguments[0],o=e.__activeElement;return t!==!1&&e.__focus(o),e._autofocus=!1,e.__node.removeClass(e.className+"-focus"),e.__dispatchEvent("blur"),e},addEventListener:function(e,t){var o=this;return o.__getEventListeners(e).push(t),o},removeEventListener:function(e,t){for(var o=this,n=o.__getEventListeners(e),r=0;r<n.length;r++)t===n[r]&&n.splice(r--,1);return o},__getEventListeners:function(e){var t=this,o=t.__listeners;return o||(o=t.__listeners={}),o[e]||(o[e]=[]),o[e]},__dispatchEvent:function(e){var t,o=this,n=o.__getEventListeners(e);o["on"+e]&&(t=o["on"+e].call(o));for(var r,a=0,l=n.length;a<l;a++)r=n[a].call(o),t!==!1&&(t=r);return t},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(t){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument,o=t&&t.activeElement||e;return o}catch(n){}},__center:function(){var e=this,t=e.__node,o=e.fixed,n=o?0:g.scrollLeft(),r=o?0:g.scrollTop(),a=m.width(),l=m.height(),i=t.width(),s=t.height(),u=(a-i)/2+n,f=382*(l-s)/1e3+r,c=e.node.style;c.left=Math.max(parseInt(u),n)+"px",c.top=Math.max(parseInt(f),r)+"px"},__follow:function(t){var o=this,n=o.__node;if(o.__align&&n.removeClass(o.__align),t=t.parentNode&&e(t),!t||!t.length)return o.__center();if(t){var r=t.offset();if(r.left*r.top<0)return o.__center()}var a=o.fixed,l=m.width(),i=m.height(),s=g.scrollLeft(),u=g.scrollTop(),c=n.width(),d=n.height(),c=t?t.outerWidth():0,d=t?t.outerHeight():0,r=o.__offset(t[0]),_=r.left,p=r.top,h=a?_-s:_,w=a?p-u:p,y=a?0:s,E=a?0:u,b=y+l-c,x=E+i-d,N={},L=o.align.split(v),C=o.className+"-",M={top:"bottom",bottom:"top",left:"right",right:"left"},T={top:"top",bottom:"top",left:"left",right:"left"},V=[{top:w-d,bottom:w+d,left:h-c,right:h+c},{top:w,bottom:w-d+d,left:h,right:h-c+c}],I={left:h+c/2-c/2,top:w+d/2-d/2},H={left:[y,b],top:[E,x]};f(L,function(e,t){V[t][e]>H[T[e]][1]&&(e=L[t]=M[e]),V[t][e]<H[T[e]][0]&&(L[t]=M[e])}),L[1]||(T[L[1]]="left"===T[L[0]]?"top":"left",V[1][L[1]]=I[T[L[1]]]),C+=L.join("-")+" "+o.className+"-follow",o.__align=C,n.addClass(C),N[T[L[0]]]=parseInt(V[0][L[0]]),N[T[L[1]]]=parseInt(V[1][L[1]]),n.css(N)},__offset:function(t){var o=t.parentNode,n=o?e(t).offset():{left:t.pageX,top:t.pageY};t=o?t:t.target;var r=t.ownerDocument,a=r.defaultView||r.parentWindow;if(a==window)return n;r=e(r);var l=r.scrollLeft(),i=r.scrollTop(),s=a.frameElement,u=e(s).offset(),f=u.left,c=u.top;return{left:n.left+f-l,top:n.top+c-i}}},n});
//# sourceMappingURL=dialog.js.map